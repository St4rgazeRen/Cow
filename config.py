"""
config.py — 比特幣投資戰情室 超參數集中管理

將原本散落各模組的硬編碼 (hardcode) 常數集中至此，
方便統一調整、測試與版本管控。

SSL 動態驗證機制說明
─────────────────────────────────────────────────────────
本地端開發（公司網路）：IS_STREAMLIT_CLOUD=false（預設）→ SSL_VERIFY=False
雲端部署（Streamlit Cloud）：在 Streamlit Cloud Secrets 或環境變數中設定
  IS_STREAMLIT_CLOUD=true → SSL_VERIFY=True

在 Streamlit Cloud 設定方式（任選其一）：
  1. Streamlit Cloud → App settings → Secrets：
     IS_STREAMLIT_CLOUD = "true"
  2. .env 檔案（本地測試雲端模式）：
     IS_STREAMLIT_CLOUD=true
─────────────────────────────────────────────────────────
"""
import os

# ==============================================================================
# 環境偵測 & SSL 驗證控制
# ==============================================================================
# 若環境變數 IS_STREAMLIT_CLOUD=true，代表當前為雲端部署，啟用 SSL 驗證
# 若未設定或為其他值，視為本地開發環境，關閉 SSL 驗證以繞過企業 Proxy
IS_STREAMLIT_CLOUD: bool = os.getenv("IS_STREAMLIT_CLOUD", "false").lower() == "true"

# 全域 SSL 驗證旗標：給 requests.get(..., verify=SSL_VERIFY) 使用
SSL_VERIFY: bool = IS_STREAMLIT_CLOUD

# ==============================================================================
# 資金管理 (Money Management)
# ==============================================================================
# 回測與倉位計算器的預設初始本金（USDT）
DEFAULT_INITIAL_CAPITAL: float = 10_000.0

# 每筆交易的預設風險百分比（佔總資金的 %）
DEFAULT_RISK_PER_TRADE: float = 1.0  # 1%

# ==============================================================================
# 技術指標參數 (Technical Indicator Parameters)
# ==============================================================================
# 長期趨勢均線（牛市濾網：收盤價需高於此線）
SMA_LONG_PERIOD: int = 200   # SMA 200

# 短期動能均線（進出場依據：Antigravity v4 核心）
EMA_SHORT_PERIOD: int = 20   # EMA 20

# 中期均線（雙幣理財牛熊濾網）
SMA_MID_PERIOD: int = 50     # SMA 50

# RSI 計算周期
RSI_PERIOD: int = 14

# ==============================================================================
# 波段策略進出場條件 (Swing Strategy Entry/Exit)
# ==============================================================================
# 進場甜蜜點：收盤價高於 EMA20 的最小乖離百分比（防止在 EMA20 以下進場）
ENTRY_DIST_MIN_PCT: float = 0.0   # 0%（貼近 EMA20）

# 進場甜蜜點：收盤價高於 EMA20 的最大乖離百分比（超過此乖離視為追高）
ENTRY_DIST_MAX_PCT: float = 1.5   # 1.5%

# 趨勢過濾：RSI 需高於此值才視為多頭動能
EXIT_RSI_MIN: int = 50

# ==============================================================================
# 交易成本 (Transaction Costs)
# ==============================================================================
# 交易手續費率（Taker Fee）：幣安現貨預設 0.1%，VIP 用戶可調低
DEFAULT_FEE_RATE: float = 0.001   # 0.1%

# 滑點估算：下單時因市場深度不足導致的成交價偏差，保守估計 0.1%
DEFAULT_SLIPPAGE_RATE: float = 0.001  # 0.1%

# ==============================================================================
# 雙幣理財策略 (Dual Investment Strategy)
# ==============================================================================
# 結算後空窗期（天）：模擬真實操作中，結算後需觀察市場 1 天再重新開單
DUAL_INVEST_COOLDOWN_DAYS: int = 1

# ==============================================================================
# 通知門檻 (Notification Thresholds)
# ==============================================================================
# 雙幣 APY 推播門檻：年化報酬率超過此值才觸發 LINE/Telegram 通知（%）
DEFAULT_APY_THRESHOLD: float = 20.0  # 20%
